!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).zustand=t()}(this,(function(){"use strict";const e=new Set,t=new Set,n=new Set,o=new Set;var r=e=>e(),i=e=>e();const s=(e,t,n,s)=>{if("function"!=typeof e){const t=new Error("State listener must be a function.");return t.cause=e,s(t)}t.add(e),n.add(e),r()};const u=e=>{e.forEach((e=>{e()}))},a=e=>"function"==typeof e?e():e;class c{constructor(e,t,n,o){this.f=e,this.g=t,this.h=n,this.i=o,this.h.add((()=>{this.j()})),this.j()}j(){const e=this.g(this.f.s);this.k(e)&&(this.l=e,this.i.forEach((e=>e(this.l))))}k(e){return!this.m||!this.n(this.l,e)}o(e,t){let n;const o={get s(){return n||(n=e()),n},p:t=>{let o;try{o=e()}catch(e){return void t(e)}return t(void 0,o)},d(e){s(e,this.i,this.h,t)},u:()=>{this.h.delete(this.o),this.h.forEach((e=>{e()})),i()}};return this.o=this.h.add((()=>{const t={...e()};Object.is(n,t)||(n=t,o.p(((e,t)=>{e?this.o(e,t):this.o(void 0,t)})))})),o}destroy(){this.h.delete(this.j),this.h.forEach((e=>{e()})),i()}}let d=!1;const f=e=>(d||(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create(createState, equalityFn)`.\n`create(createState, equalityFn)` will be removed in a future version."),d=!0),g(e,void 0));const p=(e,t)=>e(t),l=e=>e;const g=(t,d)=>{d&&(t=f(t,d));let g,h={},v=a;const y={get s(){return g},p:(e,s)=>{try{const t=y.s,n="function"==typeof e?e(t):e;if(!Object.is(t,n)){const e=a(s);g=v(n,t,e,Object.is)?t:n,u(b)}}catch(e){return(null==s?void 0:s.error(e))?void 0:void p(e)}},d:(e,t)=>{const n=new c(y,e,b,S);return n.m=!0,n.n=null!=t?t:Object.is,n.j(),n.u},u:()=>({s:y.s,p:y.p})};y.p=(e,t)=>{h={...h,...a(e)},y.p(h,t)};const m=(t,n,s,o)=>{const r=t(y.p,(e,t)=>{y.s=e,g=e,h={},u(b),null==t||t(),i()});return r};const b=new Set,S=new Set,w=s=>{g=s,h={},m(s)},E={get s(){return y.s},p:y.p,d:(e,t)=>{s(e,b,E.h,l)},h:b,S:S};return m(t),E};var h=g;return h.create=g,h.createStore=t=>(d&&(t=f(t,d)),m(t)),h.useStore=((e,t=l,n=Object.is)=>{const[o,r,i,s]=function(e,t,n,o){return c(e,t,n,o)}(e,t,e.h,e.S);return o.m=!!t,o.n=n,o}),h.vanilla=h,Object.defineProperty(h,"temporal",{get:()=>(console.warn("[DEPRECATED] Please use `import { temporal } from 'zustand/middleware'` instead of `import { temporal } from 'zustand/vanilla'`."),n)}),Object.defineProperty(h,"devtools",{get:()=>(console.warn("[DEPRECATED] Please use `import { devtools } from 'zustand/middleware'` instead of `import { devtools } from 'zustand/vanilla'`."),e)}),Object.defineProperty(h,"redux",{get:()=>(console.warn("[DEPRECATED] Please use `import { redux } from 'zustand/middleware'` instead of `import { redux } from 'zustand/vanilla'`."),t)}),Object.defineProperty(h,"combine",{get:()=>(console.warn("[DEPRECATED] Please use `import { combine } from 'zustand/middleware'` instead of `import { combine } from 'zustand/vanilla'`."),o)}),h}));